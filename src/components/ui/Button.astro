---
interface Props {
  href: string;
  variant?: 'primary' | 'secondary';
  size?: 'sm' | 'md' | 'lg';
  class?: string;
}

const { href, variant = 'primary', size = 'md', class: className } = Astro.props;
---

<a href={href} class:list={['btn', `btn--${variant}`, `btn--${size}`, className]}>
  <slot />
  <span class="btn__arrow">
    <svg width="10" height="17" viewBox="0 0 10 17" fill="none">
      <path d="M1 1L8.5 8.5L1 16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
  </span>
</a>

<style>
  /* ==========================================
     Base button styles
     ========================================== */
  .btn {
    position: relative;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    overflow: hidden;
    border-radius: 87px;
    text-decoration: none;
    font-weight: 900;
    transition: opacity 0.2s ease;
  }

  .btn:hover {
    opacity: 0.9;
  }

  /* ==========================================
     Variant: primary
     ========================================== */
  .btn--primary {
    background-color: var(--orange);
    color: var(--white);
    animation: cta-glow 2s ease-in-out infinite;
  }

  .btn--primary::after {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 60%;
    height: 100%;
    background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.25) 50%, transparent 100%);
    animation: cta-shine 3s ease-in-out infinite;
    pointer-events: none;
  }

  /* ==========================================
     Size variants
     ========================================== */
  .btn--md {
    height: 57px;
    padding: 16px 48px;
    font-size: 21.8px;
    letter-spacing: 1.09px;
  }

  .btn--sm {
    height: 44px;
    padding: 0 20px;
    border-radius: 52px;
    font-size: 14px;
    font-weight: 900;
    letter-spacing: 0.7px;
  }

  /* ==========================================
     Arrow icon
     ========================================== */
  .btn__arrow {
    display: flex;
    align-items: center;
  }

  /* ==========================================
     Keyframe animations
     ========================================== */
  @keyframes cta-glow {
    0%, 100% {
      box-shadow: 0 0 0 0 rgba(255, 81, 0, 0.4);
    }
    50% {
      box-shadow: 0 0 12px 4px rgba(255, 81, 0, 0.25);
    }
  }

  @keyframes cta-shine {
    0% {
      left: -100%;
    }
    20% {
      left: 100%;
    }
    100% {
      left: 100%;
    }
  }
</style>
